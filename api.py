import codecs,csv,urllib.request
cve_file = ""
cve = []

def downloadCVE():
	global cve_file
	url = 'https://cve.mitre.org/data/downloads/allitems.csv'
	response = urllib.request.urlretrieve(url,'allitems.csv')
	print("Downloaded")

def lineSplitter(): ## adds each line to array for easier handling
	global cve
	global cve_file
	with open("allitems.csv", 'r', encoding="ISO-8859-1") as f: # weird encoding
		for line in f:
			cve.append(line)

def stripReserved(): ## removes "** RESERVED **" CVE entries that have not been completed
	global cve
	index = 0
	cve_trans = []
	for i in cve:
		if "** RESERVED **" not in str(i):
			cve_trans.append(i)
	cve = cve_trans

def lastLines(number): ## discards all bust last number of lines
	global cve
	start = len(cve)-number
	cve = cve[start::]

def display(): ## temp display function
	global cve
	reader = csv.reader(cve)
	for i in reader:
		print(i[0] + ", " + i[4]) #CVE-Number
		print(str(i[2]))
		print()
